<!doctype html>
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>SakuStars Tulokset</title>
  <link rel="stylesheet" href="nakyma.css">
  
  <script src="js/jquery-1.11.0.js"></script>
  
  <script>
	/**
   * Lopputyö
   * 
	 * SAKUSTARS Tulospalvelu
   * Projekti Tulosnäkymä
   * 
   * Ohjelmoija: Joel Anttila 2014
   * index.html
	 */
  
  
	var tulokset = {
    "Runo Tunnissa":[["Joel Anttila", "VAO"], ["Kalle Nissinen", "Tampereen Valio-opisto"], ["Hannes Salo", "Kaukalan Malliopisto"]],
    "Yksin laulua":[["Hannes Salo", "VAO"], ["Tero Ulvinen", "Hervannan Tuliopisto"], ["Kalle Nissinen", "Kristillinen Penaalikoulu"]]
  };
  
  var kunniat = {
    "Runo Tunnissa":[["ANTEEEKSI", "VAO"], ["Pulla Bolger", "TAO"], ["Hirven Vasa", "Ullakko"], ["Kahvi Kupillinen", "Pannullisen Ammattikoulu"]],
    "Yksin laulua":[["Hermanni Voikukka", "Tuubin Opisto"], ["LP Miljönääri", "RAO"]]};
    
  var lajit = new Array();
  
  var laji;
	var tulos; 
  var index = 0; // Pitää kirjaa missä lajissa mennään.
  
	$(document).ready(function() {
    juokse();
    var tulosesitys = setInterval(function() {
      juokse();
    }, 20000); // 15000ms = 15sec
  });
	
  function juokse() {
    alusta();
    animoiSijat();
    animoiKunniat();
    
    /*
    $("#sija1").text("1. " + tulos[0][0]);
    $("#sija1_oppi").text(tulos[0][1]);    
    $("#sija2").text("1. " + tulos[0][0]);
    $("#sija2_oppi").text(tulos[0][1])
    $("#sija3").text("1. " + tulos[0][0]);
    $("#sija3_oppi").text(tulos[0][1]);
    */

    paivitaLajiIdx();
  }
  
	/**
	 * Alustaa koko verkkosovelman elementit.
	 */
	function alusta() {
	  $(".sijat").hide(); 
    $('.oppilaitos').hide();
    $('.kunnia').hide();
    
    // Viittaa lajiin => tulokset[lajit[index]][0][0]
    for(key in tulokset) {
      lajit.push(key);
    }
    
    laji = lajit[index];
    tulos = tulokset[laji];
    $("#laji").text(laji);
	}
  
	var counter = 2;
  function animoiSijat() {
    counter = 2;
    var ajastin = setInterval(function() {
      if(counter >= 0) {
        switch(counter) {
          case 0:
            naytaAnimaatio("#sija1", "1");
            break;
          case 1:
            naytaAnimaatio("#sija2", "2");
          break;
          case 2:
            naytaAnimaatio("#sija3", "3");
          break;
          }
        } else
            clearInterval(ajastin);
        counter--;
		}, 2500);
  }
  
  function animoiKunniat() {
    var k_p = $(".kunnia");
    var knn = kunniat[laji];
    
    for(var i = 0; i < knn.length; i++) {
      k_p.eq(i).html(knn[i][0] + "<br/>" + knn[i][1]);
      k_p.eq(i).fadeIn(2000);
      //k_p.eq(i).show();

      //console.log(kunniat[laji][i][0]);
    }
  }
  
	function naytaAnimaatio(sija, arvo) {
	  //console.log(sija[sija.length - 1]);
		$(sija).text(arvo + ". " + tulos[counter][0]);// [0] => Viittaa Nimeen.
		$(sija + "_oppi").text(tulos[counter][1]); // [1] => Viittaa oppilaitokseen.
		$(sija).slideToggle(1000);
		$(sija + "_oppi").slideToggle('slow');
	}
  
  function paivitaLajiIdx() {
    if(index < lajit.length)
        index++;
      else 
        index = 0;
  }
	
  </script>
  
  </head>
  
  <body>
  
    <div id="kunnia">
      <p class="kunnia"></p> <!-- 1 -->
      <p class="kunnia"></p> <!-- 2 -->
      <p class="kunnia"></p> <!-- 3 -->
      <p class="kunnia"></p> <!-- 4 -->
      <p class="kunnia"></p> <!-- 5 -->
      <p class="kunnia"></p> <!-- 6 -->
      <p class="kunnia"></p> <!-- 7 -->
      <p class="kunnia"></p> <!-- 8 -->
      <p class="kunnia"></p> <!-- 9 -->
      <p class="kunnia"></p> <!-- 10 -->
    </div>
    
    <div id="sisalto">
      <div id="tulos">
    
        <h1 id="laji"></h1>
        <p id="sija1" class="sijat"></p>
        <p id="sija1_oppi" class="oppilaitos"></p>
  
        <p id="sija2" class="sijat"></p>
        <p id="sija2_oppi" class="oppilaitos"></p>
    
        <p id="sija3" class="sijat"></p>
        <p id="sija3_oppi" class="oppilaitos"></p>
      </div>
    
      <div id="lajit">
        <img src="saku.png" />
      </div>
    </div>
  </body>
  
</html>